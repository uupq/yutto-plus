# yutto-plus - ç°ä»£åŒ– Bç«™è§†é¢‘ä¸‹è½½å™¨

ä¸€ä¸ªåŸºäºçº¯ HTTP API çš„ Bç«™è§†é¢‘ä¸‹è½½å™¨ï¼Œæä¾› Web UIã€CLI å’Œ Python API ä¸‰ç§ä½¿ç”¨æ–¹å¼ã€‚å®Œå…¨é‡å†™äº†ä¸‹è½½é€»è¾‘ï¼Œä¸ä¾èµ– yutto CLI è¾“å‡ºè§£æï¼Œä¸“æ³¨äº**æ ¸å¿ƒä¸‹è½½åŠŸèƒ½**å’Œ**ç”¨æˆ·ä½“éªŒ**ã€‚

> **åŠŸèƒ½å®Œæ•´åº¦**: 60% (æ ¸å¿ƒä¸‹è½½åŠŸèƒ½ 100% å®Œæˆï¼Œè¾…åŠ©åŠŸèƒ½å¾…å®ç°)

## âœ¨ ä¸»è¦ç‰¹æ€§

### ğŸš€ æ ¸å¿ƒä¼˜åŠ¿
- **ğŸŒ ç°ä»£åŒ– Web UI**: è‡ªåŠ¨ç«¯å£é€‰æ‹©ï¼Œè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œå®æ—¶è¿›åº¦æ˜¾ç¤º
- **ğŸ“Š ç»Ÿä¸€è¿›åº¦ç®¡ç†**: å¤šæµè¿›åº¦åˆå¹¶è®¡ç®—ï¼Œé¿å…è¿›åº¦æ¡æ¨ªè·³
- **ğŸ”„ å®æ—¶å›è°ƒæœºåˆ¶**: ç¼–ç¨‹å‹å¥½çš„è¿›åº¦ã€çŠ¶æ€ã€å®Œæˆå›è°ƒ
- **ğŸ¯ æ™ºèƒ½æµé€‰æ‹©**: æ ¹æ®è´¨é‡åå¥½è‡ªåŠ¨é€‰æ‹©æœ€ä½³è§†é¢‘å’ŒéŸ³é¢‘æµ
- **âš¡ å¹¶å‘ä¸‹è½½**: è§†é¢‘æµå’ŒéŸ³é¢‘æµå¹¶è¡Œä¸‹è½½ï¼Œæé«˜æ•ˆç‡
- **ğŸ”§ çº¯ API å®ç°**: ç›´æ¥è°ƒç”¨ Bç«™ HTTP APIï¼Œä¸ä¾èµ– CLI è§£æ

### ğŸ“¹ è§†é¢‘åŠŸèƒ½
- **å¤šæ¸…æ™°åº¦**: 8K/4K/1080P60/1080P/720P/480P/360P
- **å¤šç¼–ç **: AVC(H.264)/HEVC(H.265)/AV1 è‡ªåŠ¨é€‰æ‹©
- **éŸ³é¢‘è´¨é‡**: Hi-Res/320kbps/128kbps/64kbps
- **è¾“å‡ºæ ¼å¼**: MP4/MKV/MOVï¼ŒFFmpeg è‡ªåŠ¨åˆå¹¶

### ğŸ›ï¸ ç”¨æˆ·ä½“éªŒ
- **Web ç•Œé¢**: å“åº”å¼è®¾è®¡ï¼Œå®æ—¶çŠ¶æ€æ›´æ–°
- **å‘½ä»¤è¡Œå·¥å…·**: ç®€æ´æ˜“ç”¨çš„ CLI æ¥å£
- **API æ¥å£**: é¢å‘å¯¹è±¡è®¾è®¡ï¼Œçµæ´»é…ç½®
- **çŠ¶æ€ç®¡ç†**: å‡†å¤‡ä¸­ â†’ ä¸‹è½½ä¸­ â†’ åˆå¹¶ä¸­ â†’ å®Œæˆ
- **é”™è¯¯å¤„ç†**: å‹å¥½çš„é”™è¯¯ä¿¡æ¯å’Œé‡è¯•æœºåˆ¶

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šCLI å‘½ä»¤è¡Œ (æ¨è)

```bash
# åŸºæœ¬ç”¨æ³•
python3 yutto-plus.py "https://www.bilibili.com/video/BV1LWjXzvEX1/"

# æŒ‡å®šè´¨é‡å’Œè¾“å‡ºç›®å½•
python3 yutto-plus.py -q 80 -o "./Downloads" "https://www.bilibili.com/video/BV1LWjXzvEX1/"

# æ˜¾ç¤ºå¸®åŠ©
python3 yutto-plus.py --help
```

### æ–¹å¼äºŒï¼šWeb UI

```bash
# å¯åŠ¨ Web UI
python3 web_ui.py
# è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œå¼€å§‹ä½¿ç”¨ï¼
```

### æ–¹å¼ä¸‰ï¼šPython API

```python
from yutto_plus import YuttoPlus
import time

# åˆ›å»ºä¸‹è½½å™¨
downloader = YuttoPlus(
    default_output_dir="./Downloads",
    default_quality=80,  # 1080P
    default_audio_quality=30280,  # 320kbps
    overwrite=True
)

# åˆ›å»ºä¸‹è½½ä»»åŠ¡
task = downloader.create_download_task(
    "https://www.bilibili.com/video/BV1LWjXzvEX1/",
    quality=64  # å¯è¦†ç›–é»˜è®¤è®¾ç½®
)

# å®šä¹‰å›è°ƒå‡½æ•°
def on_progress(current, total, speed, item):
    percent = (current / total * 100) if total > 0 else 0
    print(f"è¿›åº¦: {percent:.1f}% | é€Ÿåº¦: {speed/(1024**2):.2f} MB/s")

def on_completion(success, result, error):
    if success:
        print(f"âœ… ä¸‹è½½å®Œæˆ: {result['output_filepath']}")
        print(f"ğŸ“º è§†é¢‘æµ: {result['selected_video_stream_info']}")
        print(f"ğŸ”Š éŸ³é¢‘æµ: {result['selected_audio_stream_info']}")
    else:
        print(f"âŒ ä¸‹è½½å¤±è´¥: {error}")

# å¯åŠ¨ä¸‹è½½
task.start(
    progress_callback=on_progress,
    completion_callback=on_completion
)

# ç­‰å¾…å®Œæˆ
while task.get_status().value not in ['completed', 'failed']:
    time.sleep(1)
```

## ğŸ“– CLI ä½¿ç”¨æŒ‡å—

### åŸºæœ¬å‘½ä»¤

```bash
# ä¸‹è½½è§†é¢‘ï¼ˆé»˜è®¤1080Pï¼‰
python3 yutto-plus.py "URL"

# æŒ‡å®šè§†é¢‘è´¨é‡
python3 yutto-plus.py -q 127 "URL"  # 8K
python3 yutto-plus.py -q 120 "URL"  # 4K  
python3 yutto-plus.py -q 80 "URL"   # 1080P
python3 yutto-plus.py -q 64 "URL"   # 720P

# æŒ‡å®šéŸ³é¢‘è´¨é‡
python3 yutto-plus.py -aq 30280 "URL"  # 320kbps
python3 yutto-plus.py -aq 30232 "URL"  # 128kbps

# æŒ‡å®šè¾“å‡ºç›®å½•
python3 yutto-plus.py -o "./Downloads" "URL"

# è¦†ç›–å·²å­˜åœ¨æ–‡ä»¶
python3 yutto-plus.py -w "URL"

# æŒ‡å®šè¾“å‡ºæ ¼å¼
python3 yutto-plus.py -f mkv "URL"
```

### å®Œæ•´å‚æ•°åˆ—è¡¨

```
ç”¨æ³•: yutto-plus.py [-h] [-q QUALITY] [-aq AUDIO_QUALITY] [-o OUTPUT_DIR] 
                   [-f FORMAT] [-w] [--video-codec CODEC] [--sessdata SESSDATA] 
                   [--quiet] [--verbose] url

ä½ç½®å‚æ•°:
  url                   Bç«™è§†é¢‘é“¾æ¥

å¯é€‰å‚æ•°:
  -h, --help           æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
  -q, --quality        è§†é¢‘è´¨é‡ (16-127, é»˜è®¤: 80)
  -aq, --audio-quality éŸ³é¢‘è´¨é‡ (30216-30251, é»˜è®¤: 30280)  
  -o, --output         è¾“å‡ºç›®å½• (é»˜è®¤: ./Downloads)
  -f, --format         è¾“å‡ºæ ¼å¼ (mp4/mkv/mov, é»˜è®¤: mp4)
  -w, --overwrite      è¦†ç›–å·²å­˜åœ¨æ–‡ä»¶
  --video-codec        è§†é¢‘ç¼–ç åå¥½ (avc/hevc/av1, é»˜è®¤: avc)
  --sessdata           Bç«™ç™»å½•å‡­è¯ï¼Œä¼šè‡ªåŠ¨éªŒè¯ç™»å½•çŠ¶æ€å’Œä¼šå‘˜èº«ä»½
  --quiet              å®‰é™æ¨¡å¼ï¼Œå‡å°‘è¾“å‡º
  --verbose            è¯¦ç»†æ¨¡å¼ï¼Œæ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯
```

### SESSDATA ç™»å½•éªŒè¯

```bash
# ä½¿ç”¨ SESSDATA ç™»å½•ï¼Œè‡ªåŠ¨éªŒè¯çŠ¶æ€
python3 yutto-plus.py --sessdata "ä½ çš„SESSDATAå€¼" "URL"

# ç³»ç»Ÿä¼šæ˜¾ç¤ºç™»å½•çŠ¶æ€ï¼š
# ğŸ–ï¸ [ç™»å½•çŠ¶æ€] âœ… æˆåŠŸä»¥å¤§ä¼šå‘˜èº«ä»½ç™»å½•ï½
# æˆ–
# ğŸ‘¤ [ç™»å½•çŠ¶æ€] âœ… ç™»å½•æˆåŠŸï¼Œä»¥éå¤§ä¼šå‘˜èº«ä»½ç™»å½•
# æˆ–  
# âŒ [ç™»å½•çŠ¶æ€] SESSDATA æ— æ•ˆæˆ–å·²è¿‡æœŸï¼Œè¯·æ£€æŸ¥åé‡è¯•
```

## ğŸ“– API æ–‡æ¡£

### YuttoPlus ç±»

```python
downloader = YuttoPlus(
    # å¿…éœ€ä¾èµ–
    sessdata=None,                    # Bç«™ç™»å½•å‡­è¯ (å¯é€‰)
    
    # æ ¸å¿ƒé…ç½®
    default_output_dir="./downloads", # ä¸‹è½½ç›®å½•
    default_quality=80,               # è§†é¢‘è´¨é‡ (16-127)
    default_audio_quality=30280,      # éŸ³é¢‘è´¨é‡
    default_video_codec="avc",        # è§†é¢‘ç¼–ç åå¥½
    default_output_format="mp4",      # è¾“å‡ºæ ¼å¼
    overwrite=False                   # æ˜¯å¦è¦†ç›–å·²å­˜åœ¨æ–‡ä»¶
)
```

#### è§†é¢‘è´¨é‡å¯¹åº”è¡¨
| ä»£ç  | æ¸…æ™°åº¦ | ä»£ç  | æ¸…æ™°åº¦ |
|------|--------|------|--------|
| 127 | 8K è¶…é«˜æ¸… | 80 | 1080P é«˜æ¸… |
| 120 | 4K è¶…æ¸… | 64 | 720P é«˜æ¸… |
| 116 | 1080P60 | 32 | 480P æ¸…æ™° |
| 112 | 1080P+ | 16 | 360P æµç•… |

#### éŸ³é¢‘è´¨é‡å¯¹åº”è¡¨
| ä»£ç  | è´¨é‡ |
|------|------|
| 30251 | Hi-Res æ— æŸ |
| 30280 | 320kbps |
| 30232 | 128kbps |
| 30216 | 64kbps |

### DownloadTask ç±»

```python
# åˆ›å»ºä»»åŠ¡
task = downloader.create_download_task(
    url="https://www.bilibili.com/video/BV...",
    quality=80,           # è¦†ç›–é»˜è®¤è´¨é‡
    output_dir="./custom" # è¦†ç›–é»˜è®¤ç›®å½•
)

# å¯åŠ¨ä¸‹è½½
task.start(
    progress_callback=callback_func,    # è¿›åº¦å›è°ƒ
    stream_info_callback=info_func,     # æµä¿¡æ¯å›è°ƒ  
    completion_callback=done_func       # å®Œæˆå›è°ƒ
)

# çŠ¶æ€æŸ¥è¯¢
status = task.get_status()              # pending/extracting/downloading/merging/completed/failed
streams = task.get_selected_streams_info()  # è·å–æµä¿¡æ¯
```

## ğŸ†š ä¸ yutto å¯¹æ¯”

### âœ… å·²å®ç°åŠŸèƒ½
| åŠŸèƒ½ | yutto | yutto-plus | çŠ¶æ€ |
|------|-------|------------|------|
| è§†é¢‘/éŸ³é¢‘ä¸‹è½½ | âœ… | âœ… | **å®Œå…¨æ”¯æŒ** |
| æ¸…æ™°åº¦é€‰æ‹© | âœ… | âœ… | **å®Œå…¨æ”¯æŒ** |
| ç¼–ç é€‰æ‹© | âœ… | âœ… | **å®Œå…¨æ”¯æŒ** |
| å¹¶å‘ä¸‹è½½ | âœ… | âœ… | **é‡æ–°å®ç°ï¼Œæ›´å¥½** |
| è¿›åº¦æ˜¾ç¤º | âœ… | âœ… | **æ›´å¥½çš„ä½“éªŒ** |
| æ ¼å¼è½¬æ¢ | âœ… | âœ… | **FFmpeg é›†æˆ** |
| ç™»å½•éªŒè¯ | âœ… | âœ… | **è‡ªåŠ¨éªŒè¯çŠ¶æ€** |
| ä¼šå‘˜çŠ¶æ€æ˜¾ç¤º | âœ… | âœ… | **æ¸…æ™°æ˜¾ç¤ºä¼šå‘˜èº«ä»½** |

### âŒ å¾…å®ç°åŠŸèƒ½
| åŠŸèƒ½ | yutto | yutto-plus | è®¡åˆ’ |
|------|-------|------------|------|
| å¼¹å¹•ä¸‹è½½ | âœ… | âŒ | ğŸ”¥ é«˜ä¼˜å…ˆçº§ |
| å­—å¹•ä¸‹è½½ | âœ… | âŒ | ğŸ”¥ é«˜ä¼˜å…ˆçº§ |
| å°é¢ä¸‹è½½ | âœ… | âŒ | ğŸ”¥ é«˜ä¼˜å…ˆçº§ |
| æ‰¹é‡ä¸‹è½½ | âœ… | âŒ | ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ |
| ä»£ç†æ”¯æŒ | âœ… | âŒ | ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ |

### ğŸš€ yutto-plus çš„ç‹¬æœ‰ä¼˜åŠ¿
| åŠŸèƒ½ | yutto | yutto-plus |
|------|-------|------------|
| **Web UI** | âŒ | âœ… |
| **å®æ—¶å›è°ƒ** | âŒ | âœ… |
| **ä»»åŠ¡å¯¹è±¡** | âŒ | âœ… |
| **çŠ¶æ€ç®¡ç†** | âŒ | âœ… |
| **ç»Ÿä¸€è¿›åº¦** | âŒ | âœ… |
| **çº¯ API** | âŒ | âœ… |

## ğŸ’¡ ä½¿ç”¨åœºæ™¯

### ğŸ¯ é€‚åˆåœºæ™¯
- âœ… **å•è§†é¢‘ä¸‹è½½**: æ ¸å¿ƒåŠŸèƒ½å®Œå–„ï¼Œä½“éªŒä¼˜ç§€
- âœ… **ç¨‹åºåŒ–é›†æˆ**: API æ¥å£å‹å¥½ï¼Œå›è°ƒæœºåˆ¶å®Œæ•´
- âœ… **Web åº”ç”¨**: ç°ä»£åŒ– UIï¼Œå®æ—¶è¿›åº¦æ˜¾ç¤º
- âœ… **å‘½ä»¤è¡Œä½¿ç”¨**: ç®€æ´çš„ CLI æ¥å£
- âœ… **é«˜è´¨é‡éœ€æ±‚**: æ”¯æŒ 8K/4K/Hi-Res ç­‰æœ€é«˜è´¨é‡

### âš ï¸ å½“å‰é™åˆ¶
- âŒ **å¼¹å¹•/å­—å¹•éœ€æ±‚**: å°šæœªå®ç°ï¼Œå»ºè®®ç­‰å¾…æ›´æ–°æˆ–ä½¿ç”¨ yutto
- âŒ **æ‰¹é‡ä¸‹è½½**: æš‚ä¸æ”¯æŒï¼Œéœ€è¦å¾ªç¯è°ƒç”¨
- âŒ **ç™»å½•é™åˆ¶è§†é¢‘**: æ— æ³•è®¿é—®éœ€è¦ç™»å½•çš„é«˜æ¸…ç”»è´¨

## ğŸ”§ å¼€å‘çŠ¶æ€

### å½“å‰ç‰ˆæœ¬ï¼šv0.65.0 (65% åŠŸèƒ½å®Œæˆ)

**âœ… å·²å®Œæˆ**:
- æ ¸å¿ƒä¸‹è½½å¼•æ“ (100%)
- Web UI ç•Œé¢ (100%)
- CLI å‘½ä»¤è¡Œå·¥å…· (100%)
- API æ¶æ„è®¾è®¡ (100%)
- å¤šæµè¿›åº¦ç®¡ç† (100%)
- ç™»å½•éªŒè¯å’Œä¼šå‘˜çŠ¶æ€æ˜¾ç¤º (100%)

**ğŸ”„ å¼€å‘ä¸­**:
- å°é¢ä¸‹è½½ (è®¡åˆ’ v0.7.0)
- å¼¹å¹•ä¸‹è½½ (è®¡åˆ’ v0.8.0)

## ğŸ“ é¡¹ç›®ç»“æ„

```